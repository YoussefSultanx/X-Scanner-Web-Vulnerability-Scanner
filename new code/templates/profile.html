{% extends "base.html" %}

{% block title %}Profile{% endblock %}

{% block content %}
<div class="profile-container">
    <h2 class="profile-title"><i class="fas fa-user"></i> Profile</h2>
    <div class="profile-info">
        <p><strong>Username:</strong> <span id="profile-username">{{ user.username }}</span></p>
        <p><strong>Email:</strong> <span id="profile-email">{{ user.email }}</span></p>
    </div>
    <button class="btn-edit" onclick="toggleEditForm()">Edit Profile</button>

    <div id="edit-form" style="display: none;">
        <form id="edit-profile-form" method="POST" action="{{ url_for('update_profile') }}">
            <label for="new-username"><i class="fas fa-user"></i> New Username:</label>
            <input type="text" id="new-username" name="new_username">

            <label for="new-email"><i class="fas fa-envelope"></i> New Email:</label>
            <input type="email" id="new-email" name="new_email">

            <label for="new-password"><i class="fas fa-lock"></i> New Password:</label>
            <input type="password" id="new-password" name="new_password">

            <input type="submit" value="Save Changes">
        </form>
    </div>

    <button class="btn-delete" onclick="toggleDeleteForm()">Delete Profile</button>

    <div id="delete-form" style="display: none;">
        <form id="delete-profile-form" method="POST" action="{{ url_for('delete_user') }}">
            <label for="delete-current-password"><i class="fas fa-lock"></i> Current Password:</label>
            <input type="password" id="delete-current-password" name="current_password" required>

            <input type="submit" value="Delete Profile">
        </form>
    </div>
</div>

<script>
    function toggleEditForm() {
        const form = document.getElementById('edit-form');
        form.style.display = form.style.display === 'none' ? 'block' : 'none';
    }

    function toggleDeleteForm() {
        const form = document.getElementById('delete-form');
        form.style.display = form.style.display === 'none' ? 'block' : 'none';
    }
</script>
{% endblock %}
